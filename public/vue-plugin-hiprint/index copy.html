<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" type="text/css" href="./print-lock.css" />
  <link rel="stylesheet" type="text/css" media="print" href="./print-lock.css" />
  <!-- 如果觉得慢,可换成本地链接 -->
  <script src="./jquery.js"></script>
  <script src="./JsBarcode.all.min.js"></script>
  <script src="./bwip-js.js"></script>
  <script src="./jquery.minicolors.min.js"></script>
  <script src="./socket.io.min.js"></script>
  <!-- <script src="https://unpkg.com/browse/canvg@4.0.1/dist/index.cjs"></script> -->
  <script src="./canvg.cjs"></script>
  <script src="./umd.js"></script>
  <script src="./jspdf.umd.min.js"></script>
  <script src="./html2canvas.js"></script>
  <script src="./nzh.min.js"></script>
  <script src="./vue-plugin-hiprint.js"></script>
  <!-- axios网络请求 -->
  <script src="./axios.min.js"></script>
</head>

<body>
  <div id="hiprintTemplate" class="hiprintTemplate"></div>
</body>
<script defer>
  let data = {
        template: '{"panels":[{"index":0,"name":1,"height":80,"width":140,"paperHeader":0,"paperFooter":226.7716535433071,"printElements":[{"options":{"left":72.5,"top":7.5,"height":45,"width":256.5,"title":"跟踪号","barcodeType":"code128","testData":"202301010001","fontSize":12,"lineHeight":18,"textAlign":"center","componentType":"barCode","field":"trackCode","right":328.9921875,"bottom":51.75,"vCenter":200.7421875,"hCenter":29.25,"coordinateSync":false,"widthHeightSync":false,"hideTitle":true},"printElementType":{"title":"跟踪号","type":"barcode"}},{"options":{"left":107.5,"top":50,"height":16,"width":200,"testData":"XXXXXXXXXXX","fontSize":10,"textContentVerticalAlign":"middle","componentType":"text","field":"stringTrackCode","title":"跟踪号数字","coordinateSync":false,"widthHeightSync":false,"qrCodeLevel":0},"printElementType":{"title":"跟踪号数字","type":"text"}},{"options":{"left":20,"top":62.5,"height":16,"width":372,"testData":"XXXXXXXXXXX","fontSize":10,"textAlign":"left","textContentVerticalAlign":"middle","componentType":"text","field":"goodsName","title":"商品名称","right":390.75,"bottom":77.5,"vCenter":204.75,"hCenter":69.5},"printElementType":{"title":"商品名称","type":"text"}},{"options":{"left":20,"top":85,"height":16,"width":150,"testData":"XXXXXXXXXXX","fontSize":10,"textAlign":"left","textContentVerticalAlign":"middle","componentType":"text","field":"goodsCode","title":"商品编码"},"printElementType":{"title":"商品编码","type":"text"}},{"options":{"left":215,"top":87.5,"height":16,"width":150,"testData":"XXXXXXXXXXX","fontSize":10,"textAlign":"left","textContentVerticalAlign":"middle","componentType":"text","field":"fldS1","title":"扩展字段1"},"printElementType":{"title":"扩展字段1","type":"text"}},{"options":{"left":214.5,"top":109,"height":16,"width":150,"testData":"XXXXXXXXXXX","fontSize":10,"textAlign":"left","textContentVerticalAlign":"middle","componentType":"text","field":"warpTi","title":"Ti","right":381.4921875,"bottom":122.74609375,"vCenter":306.4921875,"hCenter":114.74609375},"printElementType":{"title":"Ti","type":"text"}},{"options":{"left":19.5,"top":109,"height":16,"width":150,"testData":"XXXXXXXXXXX","fontSize":10,"textAlign":"left","textContentVerticalAlign":"middle","componentType":"text","field":"productDate","title":"生产日期"},"printElementType":{"title":"生产日期","type":"text"}},{"options":{"left":214.5,"top":135,"height":16,"width":150,"testData":"XXXXXXXXXXX","fontSize":10,"textAlign":"left","textContentVerticalAlign":"middle","componentType":"text","field":"warpHi","title":"Hi"},"printElementType":{"title":"Hi","type":"text"}},{"options":{"left":19.5,"top":135,"height":16,"width":150,"testData":"XXXXXXXXXXX","fontSize":10,"textAlign":"left","textContentVerticalAlign":"middle","componentType":"text","field":"expiryDate","title":"失效日期"},"printElementType":{"title":"失效日期","type":"text"}},{"options":{"left":214.5,"top":161,"height":16,"width":150,"testData":"XXXXXXXXXXX","fontSize":10,"textContentVerticalAlign":"middle","componentType":"text","field":"lpnNum","title":"包装数量","right":339.24609375,"bottom":172.75,"vCenter":264.24609375,"hCenter":164.75,"coordinateSync":false,"widthHeightSync":false,"qrCodeLevel":0},"printElementType":{"title":"包装数量","type":"text"}},{"options":{"left":20,"top":162.5,"height":16,"width":171,"testData":"XXXXXXXXXXX","fontSize":10,"textAlign":"left","textContentVerticalAlign":"middle","componentType":"text","field":"batchAttr1","title":"批次标签1"},"printElementType":{"title":"批次标签1","type":"text"}},{"options":{"left":20,"top":195,"height":16,"width":169.5,"testData":"XXXXXXXXXXX","fontSize":10,"textAlign":"left","textContentVerticalAlign":"middle","componentType":"text","field":"qualityStatus","title":"质量状态"},"printElementType":{"title":"质量状态","type":"text"}},{"options":{"left":210,"top":195,"height":16,"width":200,"testData":"XXXXXXXXXXX","fontSize":10,"textAlign":"left","textContentVerticalAlign":"middle","componentType":"text","field":"consignorName","title":"货主"},"printElementType":{"title":"货主","type":"text"}}],"paperNumberLeft":253,"paperNumberTop":204,"paperNumberDisabled":true,"paperNumberContinue":false,"watermarkOptions":{}}]}',
        printData: [{"consignorName":"艾欧尼亚","trackCode":"1234567","stringTrackCode":"1234567","goodsCode":"sweet","goodsId":82.0,"goodsName":"甜瓜","lpnNum":2.0,"planSlCode":"STAGE","printDate":"2025-05-13 14:13:44","qualityStatus":"良品","tableUser":"心伤谁来疼","warpUnit":"件"}],
        options:{timeout:999999999},
        noFile: true
    }
    data.template = JSON.parse(data.template);
    console.log(data.template);


  let datae = {
    template: {
      "panels": [{
        "index": 0,
        "name": 1,
        "height": 80,
        "width": 60,
        "paperHeader": 0,
        "paperFooter": 226.7716535433071,
        "printElements": [ {
          "options": {
            "left": 5,
            "top": 97.5,
            "height": 32,
            "width": 160,
            "title": "库位编码",
            "barcodeType": "code128",
            "testData": "A101-01-01-01",
            "fontSize": 12,
            "lineHeight": 18,
            "textAlign": "center",
            "hideTitle": true,
            "componentType": "barCode",
            "field": "slCode",
            "moduleId": "slCodeBarcode",
            "moduleName": "库位编码条码",
            "qid": "slCode_1"
          },
          "printElementType": {
            "title": "库位编码",
            "type": "barcode"
          }
        }],
        "paperNumberLeft": 111,
        "paperNumberTop": 119,
        "paperNumberDisabled": true,
        "paperNumberContinue": true,
        "paperNumberFormat": "${paperNo}-${paperCount}",
        "watermarkOptions": {},
        "panelLayoutOptions": {}
      }]
    },
    printData: [
      [{
        "createTime": "2025-04-29 13:56:38",
        "createUser": "jyz3",
        "printDate": "2025-05-13 16:13:49",
        "slCode": 1234567,
        "slId": 16298,
        "slStatusName": "正常",
        "slTypeName": "货架",
        "tableUser": "jyz3",
        "updateTime": "2025-04-30 14:19:24",
        "updateUser": "jyz3",
        "useTypeName": "拣货库位",
        "wzCode": "BB",
        "wzId": 324,
        "wzName": "BB区"
      }]
    ],

    noFile: true
  }

  let data2 = {
                template: {
                    "panels": [{
                        "index": 0,
                        "name": 1,
                        "height": 30,
                        "width": 50,
                        "paperHeader": 0,
                        "paperFooter": 85.03937007874016,
                        "printElements": [{
                            "options": {
                                "left": 7.5,
                                "top": 7.5,
                                "height": 16,
                                "width": 129,
                                "testData": "测试库区",
                                "fontSize": 14,
                                "textAlign": "center",
                                "textContentVerticalAlign": "middle",
                                "componentType": "text",
                                "field": "wzName",
                                "title": "库区名称",
                                "right": 136.25390625,
                                "bottom": 24.25,
                                "vCenter": 71.75390625,
                                "hCenter": 16.25,
                                "coordinateSync": false,
                                "widthHeightSync": false,
                                "hideTitle": true,
                                "qrCodeLevel": 0
                            },
                            "printElementType": {
                                "title": "库区名称",
                                "type": "text"
                            }
                        }, {
                            "options": {
                                "left": 12,
                                "top": 30,
                                "height": 32,
                                "width": 120,
                                "testData": "A101",
                                "fontSize": 12,
                                "lineHeight": 18,
                                "textType": "barcode",
                                "textAlign": "center",
                                "componentType": "barCode",
                                "field": "wzCode",
                                "moduleId": "wzCodeBarcode",
                                "moduleName": "库区编号条码",
                                "title": "库区编号",
                                "right": 128.25,
                                "bottom": 66.9921875,
                                "vCenter": 68.25,
                                "hCenter": 50.9921875
                            },
                            "printElementType": {
                                "title": "库区编号",
                                "type": "text"
                            }
                        }],
                        "paperNumberLeft": 111,
                        "paperNumberTop": 63,
                        "paperNumberDisabled": true,
                        "paperNumberContinue": true,
                        "orient": 1
                    }]
                },
                printData: [{
                    "createTime": "2025-04-17 13:02:24",
                    "createUser": "jyz3",
                    "printDate": "2025-05-12 15:52:35",
                    "tableUser": "jyz3",
                    "updateTime": "2025-04-17 13:02:42",
                    "updateUser": "jyz3",
                    "warehouseId": 100066,
                    "warehouseName": "小数点",
                    "wzCode": "BB",
                    "wzId": 324,
                    "wzName": "BB区"
                }],

                noFile: true
            }





  window.autoConnect = false;
  const templateDiv = document.querySelector("#hiprintTemplate.hiprintTemplate")

  function renderHtml() {
    hiprint.init({});
    // 模拟网络请求然后,创建模板
    var hiprintTemplate = new hiprint.PrintTemplate({
      template: data.template,
    });
    // 渲染模板
    let htmlJq = hiprintTemplate.getHtml(data.printData);
    templateDiv.appendChild(htmlJq[0]);
  }
  renderHtml();
</script>

</html>